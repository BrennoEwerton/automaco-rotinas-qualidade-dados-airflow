# Relatório de Qualidade dos Dados

**Arquivo validado:** microdados_2022.CSV

## Expectativas com falha
- expect_column_values_to_match_regex: {'column': 'CO_MUNICIPIO', 'regex': '^\\d{7}$', 'batch_id': '4cd3468ee5af273ae3fd020419cda46b'} | unexpected_count=9603; unexpected_percent=1.6758606608157847; partial_unexpected_list=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
- expect_column_values_to_be_in_set: {'column': 'TP_GRAU_ACADEMICO', 'value_set': [1, 2, 3, 4], 'batch_id': '4cd3468ee5af273ae3fd020419cda46b'} | unexpected_count=1407; unexpected_percent=0.24554159635195344; partial_unexpected_list=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

## Sugestões (LLM)
**Diagnóstico**

As expectativas do Great Expectations que falharam indicam problemas de qualidade de dados em duas colunas específicas: CO_MUNICIPIO e TP_GRAU_ACADEMICO.

*   A coluna CO_MUNICIPIO tem valores que não atendem ao padrão esperado (regex) com 9.603 ocorrências, representando cerca de 1,68% do total.
    Aqui estão as sugestões mais importantes:

    *   Verifique se a regra regular usada (`^\\d{7}$`) é correta e adequada para a coluna em questão.
    *   Caso esteja usando uma regra específica para encontrar CEPs, considere utilizar uma biblioteca de validação de CPES que possa oferecer suporte à busca e limpeza dos dados também.
*   A coluna TP_GRAU_ACADEMICO tem valores fora da lista esperada ([1, 2, 3, 4]) com 1.407 ocorrências, o que representa cerca de 0,24% do total.

**Sugestões para cada regra**

### Para expect_column_values_to_match_regex nos CO_MUNICIPIO

*   **Cheque a regular expression**: Certifique-se de que o padrão utilizado (`^\\d{7}$`) é correto e eficaz. O padrão indica um número com 7 dígitos, mas é necessário garantir se este é o formato esperado para os CEPs (Código Postal dos Municípios).
    **Dicas importantes:**
        *   Não esqueça que diferentes países têm formatos de CEPs diversos.
        *   Utilize uma biblioteca específica para validação de CPES ou um módulo de Python especializado e seguro, acesse um exemplo em: `https://www.geeksforgeeks.org/validation-of-indian-pin-code-python/`, além verificar se na utilização dos dados em CEPs deve-se também utilizar funções de limpeza.
*   **Entenda as razões**: Analise por quais as colunas não estão seguem regra e verifique cada linha das 9.603 ocorrências identificadas, buscando entender por que a validação falhou em cada caso específico.

### Para expect_column_values_to_be_in_set da TP_GRAU_ACADEMICO

*   **Revisite a lista de valores esperados**: Confirme se [1, 2, 3, 4] é a lista completa e correta dos gradientes acadêmicos válidos. Verifique se houve mudança nas categorias nos dados brutos de entrada.
    Lembre-se que uma regra de validação pode falhar por causa da própria biblioteca usada para buscar a categoria no conjunto de dados, verifique por exemplo se o método `in_set` faz caso com os espaços em brancos antes ou depois do valor.
*   **Entenda as razões**: Faça um levantamento detalhado das linhas onde houve falha no padrão esperado. Seja criativo e analise cada linha para entender de forma clara por que estão fora da lista prevista.

**Ações Práticas**

1.  **Revisão dos Dados** - Retire amostra de dados brutos, ou até mesmo crie um novo banco de testes somente com os exemplos onde a validação falhou, verifique manualmente como os dados atuais estão sendo tratados.
2.  **Correção dos Dados**: Implemente correções nos dados identificados fora da especificação para garantir que estejam no formato esperado. Por exemplo: se encontrar valores com espacos em branco, utilize o módulo `strip()` no pandas e `rstrip()` ou `replace`, dependendo dos casos.
3.  **Revisão de Processos**: Verifique os processos que alimentam a coluna para garantir que haja controles de qualidade inseridos desde seu nascimento como dado até sua chegada na análise como variável em uma tabela.
